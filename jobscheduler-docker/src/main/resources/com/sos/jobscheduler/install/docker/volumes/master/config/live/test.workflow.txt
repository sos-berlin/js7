workflow {
  job TEST1;

  // Fork with part of a branch running at another Agent
  // Each branch starts with a string which is appended to the child Orders.
  fork(
    "ü•ï" {
      job TEST1;
      job TEST1;
    },
    "üçã" {
      job TEST1;
      job TEST2;
    });
  job TEST1;

  // Fork with all jobs at same (current) Agent
  fork(
    "ü•ï" {
      job TEST1;
      job TEST1;
    },
    "üçã" {
      job TEST1;
      job TEST1;
    });
  job TEST1;

  // Fork with one branch at current Agent, the other branch at the other Agent.
  fork(
    "ü•ï" {
      job TEST1;
      job TEST1;
    },
    "üçã" {
      job TEST2;
      job TEST2;
    });

  if (returnCode == 0 || returnCode == 1) {
    job TEST1;
  } else {
    job TEST2;
  };

  define job TEST1 {
    execute executable="/test", agent="test-agent-1", taskLimit=30;
  }

  define job TEST2 {
    execute executable="/test", agent="test-agent-2", taskLimit=10;
  }
}
