#!/usr/bin/env bash
set -euo pipefail

data="."

function usage() {
  echo "Usage: $0 --data-directory=DATA"
}

jsonFields='"TYPE": "CancelOrders", "orderIds": "orderId => true", "mode": { "TYPE": "FreshOrStarted", "kill": {} }'

for arg in "$@"; do :
  case "$arg" in
    --data-directory=*)
      data="${arg#*=}"
      ;;
    *)
      echo "Invalid option: $arg"
      exit 1
      ;;
  esac
done

exec /opt/js7/bin/js7-http-client --data-directory="$data" "{ $jsonFields }"
