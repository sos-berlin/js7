<?xml version="1.0" encoding="UTF-8"?>
<configuration status="WARN">
  <appenders>
    <console name="stderr" target="SYSTEM_ERR">
      <patternLayout pattern="%highlight{%d{DEFAULT} %-5level{INFO=info, DEBUG=debug, TRACE=trace} %logger %notEmpty{»%marker« }- %message}{INFO=blue,WARN=red bold}%n"/>
    </console>
    <rollingRandomAccessFile name="file"
                             fileName="target/build.log"
                             filePattern="target/build-%d{yyyy-MM-dd}-%i.log.gz"
                             append="true"
                             immediateFlush="${sys:js7.log4j.immediateFlush:-true}">
      <!-- append=true is required to let forked tests append. -->
      <patternLayout pattern="%d{DEFAULT_MICROS} %-5level{INFO=info, DEBUG=debug, TRACE=trace} [%threadName] %logger %notEmpty{»%marker« }- %message%n"
                     charset="UTF-8"/>
      <policies>
        <timeBasedTriggeringPolicy/>
      </policies>
    </rollingRandomAccessFile>
  </appenders>
  <loggers>
    <root level="info">
      <appenderRef level="off"   ref="stderr"/>
      <appenderRef level="trace" ref="file"/>
    </root>
    <logger level="debug" name="js7"/>
    <logger level="trace" name="js7.journal.JournalActor"/>
    <logger level="trace" name="js7.executor.forwindows"/>
    <logger level="debug" name="js7.journal.watch.RealEventWatch"/>
    <logger level="trace" name="js7.data.controller.ControllerState"/>
    <logger level="trace" name="js7.data.controller.ControllerStateExecutor"/>
  </loggers>
</configuration>
